<!DOCTYPE html>
<html lang="en-US">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="description" content="Simple minimalist theme">
<meta name="keywords" content="R, Python, Data Science, Statistics">

<base href="../../">

<title>My blog</title>

<meta name="generator" content="Hugo 0.29" />




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400|Roboto+Slab:400,700|Roboto:300,300i,400,400i,500,500i,700,700i">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="../../css/main.css">




<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" type="image/png" href="../../favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="../../manifest.json">
<link rel="mask-icon" href="../../safari-pinned-tab.svg" color="#5bbad5">
<meta name="theme-color" content="#ffffff">

</head>
<body lang="en-US">
<div class="container">


<header class="row text-left title">
  <h1 class="title">Quick tutorial on ggplot2</h1>
</header>
<section id="category-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-left meta">
      PUBLISHED ON OCT 11, 2017
      
    </h6>
  </div>
  
</section>
<section id="content-pane" class="row">
  <div class="col-md-12 text-justify content">
    <p>ggplot2 has been my most used graphical tool for all of my data analysis projects. So, I thought my first blog post would be a short tutorial on how to use it to create meaningful plots.</p>
<div id="ggplot2" class="section level3">
<h3>ggplot2</h3>
<p>ggplot2 is such a powerful R package for visualization. I personally admire the clarity and aesthetic of plots generated by this tool. It was created by Hadley Wickham in 2005 and is one of the best maintained R packages. So let’s get started:</p>
</div>
<div id="installation" class="section level3">
<h3>Installation</h3>
<p>There are three ways this can be done:</p>
<div id="by-installing-whole-tidyverse" class="section level4">
<h4>1. By installing whole tidyverse:</h4>
<p>install.packages(“tidyverse”)</p>
</div>
<div id="install-just-ggplot2-this-being-the-most-used." class="section level4">
<h4>2. Install just ggplot2: This being the most used.</h4>
<p>install.packages(“ggplot2”)</p>
</div>
<div id="or-the-development-version-from-github" class="section level4">
<h4>3. Or the development version from GitHub:</h4>
<p>install.packages(“devtools”)</p>
<p>devtools::install_github(“tidyverse/ggplot2”)</p>
</div>
</div>
<div id="usage" class="section level3">
<h3>Usage</h3>
<p>In order to start of, you first write ggplot(), then inside supply a dataset; then use aes() which provides aesthetic mappings that describes how variables in the data are mapped to visual properties of geoms. Then, you can start adding layers such as geom_smooth(), geom_jitter(), geom_line(), ggtitle()…. , scales such as scale_linetype_manual (the code below illustrates how this allows us to add an additional element on the legend tab), and faceting specifications (you can have multiple panels based on a variable, split the plot using facets).</p>
</div>
<div id="example-1" class="section level3">
<h3>Example 1:</h3>
<p>Data collected from DAP-2016 was used to predict the association between a typical patient’s emergency department “ED” LOS (length of stay until discharge or hospital admission) and factors that potentially contribute to LOS measured over a one-year period.</p>
<p>For better graphical representation, we make some adjustments to create categorical variables. Therefore, I divided time of day in 3 of the most common hospital workshifts:1 (11:00pm-6:59am), 2 (7am-2:59pm) and 3: (3:00pm-10:59pm). Acuity level: 1 (Weak), 2 &amp; 3(Mild), 4 &amp; 5 (severe) TypeofDay: 1 (Weekend) and 0(Weekdays).</p>
<pre class="r"><code>ggplot(emergency.data, aes(x = age, y = los, group = interaction(acuitylevels, typeofday), colour = acuitylevels, 
    linetype = factor(typeofday))) + geom_smooth(size = 1, alpha = 0.2) + xlab(&quot;Age&quot;) + ylab(&quot;length of stay&quot;) + 
    ggtitle(&quot;Figure 1&quot;) + scale_linetype_manual(&quot;typeofday&quot;, values = c(1, 2, 3)) + theme_bw() + theme(axis.text.y = element_text(angle = 90, 
    hjust = 0.5), plot.margin = rep(unit(0, &quot;null&quot;), 4), legend.position = &quot;bottom&quot;, legend.box = &quot;vertical&quot;, 
    text = element_text(size = 9), legend.text = element_text(size = 6)) + scale_x_continuous(breaks = seq(18, 
    85, 10))</code></pre>
<p><img src="../../blog/2015-07-23-r-rmarkdown_files/figure-html/unnamed-chunk-2-1.png" width="672" /> As you can see in the code above, aes() gives us the x and y variables, and I introduced additional variables that will interact, acuity levels has three distinct colors ( red, green and blue) and if you look closely typeofday show us that lines that are dotted represent 1, and lines that are continuous are 0. Patients with acuity levels represented as mild (red), tend to have a higher length of stay during weekdays (continuous line that represent 0: Weekdays).</p>
<p>geom_smooth : smoothing method (function) to use, eg. lm, glm, gam, loess, rlm. For datasets with n &lt; 1000 default is loess. For datasets with 1000 or more observations defaults to gam. Here the default was gam. In case you have a scatterplot with a lot of noise, seeing dominant pattern can be taxing. In this case adding a smoothed line to the plot with geom_smooth() would be greatly beneficial.</p>
<p>scale_x_continuous() here is giving limits of age range: from 18 to 85 with increments of 10.</p>
</div>
<div id="example-2" class="section level3">
<h3>Example 2:</h3>
<p>Below is a plot that illustrates the fraction of total medical expenditures that are attributable to having a major smoking-caused disease (MSCD) — including lung cancer, laryngeal cancer, COPD, CHD, stroke, and other cancers — for different age, sex and demographic strata. The data comes from the National Medical Expenditure Survey (NMES)</p>
<pre class="r"><code>ggplot(dat, aes(x = lastage, y = noexp, group = interaction(mscd, male), colour = mscd, linetype = factor(male))) + 
    geom_jitter(size = 0.5) + xlab(&quot;Age&quot;) + ylab(&quot;Zero Expenditures&quot;) + geom_smooth(size = 1.1, alpha = 0.5) + 
    ggtitle(&quot;Figure 2&quot;) + 
scale_linetype_manual(&quot;Male&quot;, values = c(1, 3)) + theme_bw() + theme(axis.text.y = element_text(angle = 90, 
    hjust = 0.5), plot.margin = rep(unit(0, &quot;null&quot;), 4), legend.position = &quot;bottom&quot;, legend.box = &quot;horizontal&quot;, 
    text = element_text(size = 9), legend.text = element_text(size = 6)) + scale_x_continuous(breaks = seq(40, 
    80, 10))</code></pre>
<p><img src="../../blog/2015-07-23-r-rmarkdown_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Lastly, a quick illustration of facet_wrap using the mpg data which is one of the R default data.</p>
<pre class="r"><code>data(&quot;mtcars&quot;)
ggplot(mpg, aes(displ, hwy)) + ggtitle(&quot;Figure 3&quot;) + geom_point() + facet_wrap(~class, nrow = 4)</code></pre>
<p><img src="../../blog/2015-07-23-r-rmarkdown_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>I hope you enjoyed this little tutorial about ggplot2!</p>
</div>

  </div>
</section>
<section id="tag-pane" class="row meta">
  
  <div class="col-md-12">
    <h6 class="text-right meta">
      
    </h6>
  </div>
  
</section>




<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "ckineza-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



<section id="menu-pane" class="row menu text-center">
  
  
  
  <span><a class="menu-item" href="../../blog">blog</a></span>
  
  
  <span><a class="menu-item" href="../../blog/2015-10-17-r-rmarkdown/"> | next &gt;</a></span>
  
  
  <h4 class="text-center"><a class="menu-item" href="../../">home</a></h4>
</section>



<footer class="row text-center footer">
  <hr />
  
  <h6 class="text-center copyright">© 2017. Cynthia Kineza. <a href="http://creativecommons.org/licenses/by/3.0/">Some Rights Reserved</a>.</h6>
  
  <h6 class="text-center powered">Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/shenoybr/hugo-goa">Goa</a>.</h6>
  
  
</footer>

</div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  

<script type="text/javascript">
hljs.initHighlightingOnLoad();
</script>




<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'XYZ', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="js/main.js"></script>
</body>
</html>


